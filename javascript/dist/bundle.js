!function e(t,n,r){function i(o,l){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},s=e("jQuery"),u=r(s),c=e("events"),d=r(c),f=function(e){function t(e,n,r,a,o,s,u,c){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fetch_url=e,this.search_url=n,this.update_url=r,this.delete_url=a,this.limit=o,this.bulkActions=s,this.$folder=u,this.folder=c,this.page=1}return a(t,e),o(t,[{key:"fetch",value:function(e){var t=this;"undefined"!=typeof e&&(this.page=1,this.request("POST",this.fetch_url,{id:e}).then(function(e){t.emit("onFetchData",e)}))}},{key:"search",value:function(){var e=this;this.page=1,this.request("GET",this.search_url).then(function(t){e.emit("onSearchData",t)})}},{key:"more",value:function(){var e=this;this.page++,this.request("GET",this.search_url).then(function(t){e.emit("onMoreData",t)})}},{key:"navigate",value:function(e){var t=this;this.page=1,this.folder=e,this.persistFolderFilter(e),this.request("GET",this.search_url).then(function(e){t.emit("onNavigateData",e)})}},{key:"persistFolderFilter",value:function(e){"/"===e.substr(-1)&&(e=e.substr(0,e.length-1)),this.$folder.val(e)}},{key:"delete",value:function(e){var t=this,n=[];"[object Array]"!==Object.prototype.toString.call(e)?n.push(e):n=e,this.request("GET",this.delete_url,{ids:n}).then(function(){for(var e=0;e<n.length;e+=1)t.emit("onDeleteData",n[e])})}},{key:"filter",value:function(e,t,n,r,i,a){this.name=e,this.type=t,this.folder=n,this.createdFrom=r,this.createdTo=i,this.onlySearchInFolder=a,this.search()}},{key:"save",value:function(e,t){var n=this,r={id:e};t.forEach(function(e){r[e.name]=e.value}),this.request("POST",this.update_url,r).then(function(){n.emit("onSaveData",e,r)})}},{key:"request",value:function(e,t){var n=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i={limit:this.limit,page:this.page};return this.name&&""!==this.name.trim()&&(i.name=decodeURIComponent(this.name)),this.folder&&""!==this.folder.trim()&&(i.folder=decodeURIComponent(this.folder)),this.createdFrom&&""!==this.createdFrom.trim()&&(i.createdFrom=decodeURIComponent(this.createdFrom)),this.createdTo&&""!==this.createdTo.trim()&&(i.createdTo=decodeURIComponent(this.createdTo)),this.onlySearchInFolder&&""!==this.onlySearchInFolder.trim()&&(i.onlySearchInFolder=decodeURIComponent(this.onlySearchInFolder)),this.showLoadingIndicator(),u["default"].ajax({url:t,method:e,dataType:"json",data:u["default"].extend(i,r)}).always(function(){n.hideLoadingIndicator()})}},{key:"showLoadingIndicator",value:function(){(0,u["default"])(".cms-content, .ui-dialog").addClass("loading"),(0,u["default"])(".ui-dialog-content").css("opacity",".1")}},{key:"hideLoadingIndicator",value:function(){(0,u["default"])(".cms-content, .ui-dialog").removeClass("loading"),(0,u["default"])(".ui-dialog-content").css("opacity","1")}}]),t}(d["default"]);n["default"]=f,t.exports=n["default"]},{events:14,jQuery:"jQuery"}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=window.location.href.split("?");t.length>1&&(t=t[1].split("#"));for(var n=t[0].split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(decodeURIComponent(i[0])===e)return decodeURIComponent(i[1])}return null}function a(e){var t,n,r=(0,s["default"])(".asset-gallery").find(".asset-gallery-component-wrapper"),a=(0,s["default"])(".cms-search-form"),o=(0,s["default"])(".asset-gallery").data("asset-gallery-initial-folder"),l=i("q[Folder]")||o;return 0==a.find('[type=hidden][name="q[Folder]"]').length&&a.append('<input type="hidden" name="q[Folder]" />'),("undefined"==typeof e||"undefined"==typeof e.backend)&&(t=new b["default"](r.data("asset-gallery-fetch-url"),r.data("asset-gallery-search-url"),r.data("asset-gallery-update-url"),r.data("asset-gallery-delete-url"),r.data("asset-gallery-limit"),r.data("asset-gallery-bulk-actions"),a.find('[type=hidden][name="q[Folder]"]'),l),t.emit("filter",i("q[Name]"),i("q[AppCategory]"),i("q[Folder]"),i("q[CreatedFrom]"),i("q[CreatedTo]"),i("q[CurrentFolderOnly]"))),n={backend:t,current_folder:l,cmsEvents:{},initial_folder:o,name:(0,s["default"])(".asset-gallery").data("asset-gallery-name")},s["default"].extend(!0,n,e)}function o(){var e=a(),t=(0,y["default"])();f["default"].render(c["default"].createElement(p.Provider,{store:t},c["default"].createElement(m["default"],e)),(0,s["default"])(".asset-gallery-component-wrapper")[0])}var l=e("jQuery"),s=r(l),u=e("react"),c=r(u),d=e("react-dom"),f=r(d),p=e("react-redux"),h=e("../state/configureStore"),y=r(h),v=e("../sections/gallery/controller"),m=r(v),g=e("../backend/file-backend"),b=r(g);window.ss.router("/assets",function(e,t){o(),t()}),o()},{"../backend/file-backend":1,"../sections/gallery/controller":8,"../state/configureStore":10,jQuery:"jQuery",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],3:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{gallery:e.assetAdmin.gallery}}function s(e){return{actions:(0,F.bindActionCreators)(k,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=i(d),p=e("react"),h=i(p),y=e("react-dom"),v=i(y),m=e("silverstripe-component"),g=i(m),b=e("react-addons-test-utils"),_=i(b),E=e("react-redux"),F=e("redux"),O=e("../../state/gallery/actions"),k=r(O),D=e("i18n"),T=i(D),C=function(e){function t(e){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.onChangeValue=this.onChangeValue.bind(this)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){var e=(0,f["default"])(v["default"].findDOMNode(this)).find(".dropdown");e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.change(function(){return _["default"].Simulate.click(e.find(":selected")[0])})}},{key:"render",value:function(){var e=this;return h["default"].createElement("div",{className:"gallery__bulk-actions fieldholder-small"},h["default"].createElement("select",{className:"dropdown no-change-track no-chzn",tabIndex:"0","data-placeholder":this.props.gallery.bulkActions.placeholder,style:{width:"160px"}},h["default"].createElement("option",{selected:!0,disabled:!0,hidden:!0,value:""}),this.props.gallery.bulkActions.options.map(function(t,n){return h["default"].createElement("option",{key:n,onClick:e.onChangeValue,value:t.value},t.label)})))}},{key:"getOptionByValue",value:function(e){for(var t=0;t<this.props.gallery.bulkActions.options.length;t+=1)if(this.props.gallery.bulkActions.options[t].value===e)return this.props.gallery.bulkActions.options[t];return null}},{key:"getSelectedFiles",value:function(){return this.props.gallery.selectedFiles}},{key:"applyAction",value:function(e){switch(e){case"delete":this.props.backend["delete"](this.getSelectedFiles());default:return!1}}},{key:"onChangeValue",value:function(e){var t=this.getOptionByValue(e.target.value);null!==t&&(t.destructive===!0?confirm(T["default"].sprintf(T["default"]._t("AssetGalleryField.BULK_ACTIONS_CONFIRM"),t.label))&&this.applyAction(t.value):this.applyAction(t.value),(0,f["default"])(v["default"].findDOMNode(this)).find(".dropdown").val("").trigger("liszt:updated"))}}]),t}(g["default"]);n["default"]=C,n["default"]=(0,E.connect)(l,s)(C),t.exports=n["default"]},{"../../state/gallery/actions":11,i18n:"i18n",jQuery:"jQuery",react:"react","react-addons-test-utils":"react-addons-test-utils","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],4:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{gallery:e.assetAdmin.gallery}}function s(e){return{actions:(0,_.bindActionCreators)(F,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=i(d),p=e("i18n"),h=i(p),y=e("react"),v=i(y),m=e("react-dom"),g=i(m),b=e("react-redux"),_=e("redux"),E=e("../../state/gallery/actions"),F=r(E),O=e("../../constants"),k=i(O),D=e("silverstripe-component"),T=i(D),C=function(e){function t(e){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.getButtonTabIndex=this.getButtonTabIndex.bind(this),this.onFileNavigate=this.onFileNavigate.bind(this),this.onFileEdit=this.onFileEdit.bind(this),this.onFileDelete=this.onFileDelete.bind(this),this.handleDoubleClick=this.handleDoubleClick.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.preventFocus=this.preventFocus.bind(this),this.onFileSelect=this.onFileSelect.bind(this)}return o(t,e),u(t,[{key:"handleDoubleClick",value:function(e){(e.target===g["default"].findDOMNode(this.refs.title)||e.target===g["default"].findDOMNode(this.refs.thumbnail))&&this.onFileNavigate(e)}},{key:"onFileNavigate",value:function(e){return this.isFolder()?void this.props.onFileNavigate(this.props,e):void this.onFileEdit(e)}},{key:"onFileSelect",value:function(e){e.stopPropagation(),-1===this.props.gallery.selectedFiles.indexOf(this.props.id)?this.props.actions.selectFiles(this.props.id):this.props.actions.deselectFiles(this.props.id)}},{key:"onFileEdit",value:function(e){var t=this;e.stopPropagation(),this.props.actions.setEditing(this.props.gallery.files.find(function(e){return e.id===t.props.id}))}},{key:"onFileDelete",value:function(e){e.stopPropagation(),this.props.onFileDelete(this.props,e)}},{key:"isFolder",value:function(){return"folder"===this.props.category}},{key:"getThumbnailStyles",value:function(){return"image"===this.props.category?{backgroundImage:"url("+this.props.url+")"}:{}}},{key:"getThumbnailClassNames",value:function(){var e="item__thumbnail";return this.isImageLargerThanThumbnail()&&(e+=" item__thumbnail--large"),e}},{key:"isSelected",value:function(){return this.props.gallery.selectedFiles.indexOf(this.props.id)>-1}},{key:"isFocussed",value:function(){return this.props.gallery.focus===this.props.id}},{key:"getButtonTabIndex",value:function(){return this.isFocussed()?0:-1}},{key:"getItemClassNames",value:function(){var e="item item--"+this.props.category;return this.isFocussed()&&(e+=" item--focussed"),this.isSelected()&&(e+=" item--selected"),e}},{key:"isImageLargerThanThumbnail",value:function(){var e=this.props.attributes.dimensions;return e.height>k["default"].THUMBNAIL_HEIGHT||e.width>k["default"].THUMBNAIL_WIDTH}},{key:"handleKeyDown",value:function(e){e.stopPropagation(),e.target===g["default"].findDOMNode(this.refs.thumbnail)&&(this.props.spaceKey===e.keyCode&&(e.preventDefault(),(0,f["default"])(g["default"].findDOMNode(this)).find(".item__actions__action").first().focus()),this.props.returnKey===e.keyCode&&this.onFileNavigate(e))}},{key:"handleFocus",value:function(){this.props.actions.setFocus(this.props.id)}},{key:"handleBlur",value:function(){this.props.actions.setFocus(!1)}},{key:"preventFocus",value:function(e){e.preventDefault()}},{key:"render",value:function(){return v["default"].createElement("div",{className:this.getItemClassNames(),"data-id":this.props.id,onDoubleClick:this.handleDoubleClick},v["default"].createElement("div",{ref:"thumbnail",className:this.getThumbnailClassNames(),tabIndex:"0",onKeyDown:this.handleKeyDown,style:this.getThumbnailStyles(),onClick:this.onFileSelect,onMouseDown:this.preventFocus},v["default"].createElement("div",{className:"item__actions"},v["default"].createElement("button",{className:"item__actions__action item__actions__action--select [ font-icon-tick ]",type:"button",title:h["default"]._t("AssetGalleryField.SELECT"),tabIndex:this.getButtonTabIndex(),onClick:this.onFileSelect,onFocus:this.handleFocus,onBlur:this.handleBlur}),v["default"].createElement("button",{className:"item__actions__action item__actions__action--remove [ font-icon-trash ]",type:"button",title:h["default"]._t("AssetGalleryField.DELETE"),tabIndex:this.getButtonTabIndex(),onClick:this.onFileDelete,onFocus:this.handleFocus,onBlur:this.handleBlur}),v["default"].createElement("button",{className:"item__actions__action item__actions__action--edit [ font-icon-edit ]",type:"button",title:h["default"]._t("AssetGalleryField.EDIT"),tabIndex:this.getButtonTabIndex(),onClick:this.onFileEdit,onFocus:this.handleFocus,onBlur:this.handleBlur}))),v["default"].createElement("p",{className:"item__title",ref:"title"},this.props.title))}}]),t}(T["default"]);C.propTypes={id:v["default"].PropTypes.number,title:v["default"].PropTypes.string,category:v["default"].PropTypes.string,url:v["default"].PropTypes.string,dimensions:v["default"].PropTypes.shape({width:v["default"].PropTypes.number,height:v["default"].PropTypes.number}),onFileNavigate:v["default"].PropTypes.func,onFileEdit:v["default"].PropTypes.func,onFileDelete:v["default"].PropTypes.func,spaceKey:v["default"].PropTypes.number,returnKey:v["default"].PropTypes.number,onFileSelect:v["default"].PropTypes.func,selected:v["default"].PropTypes.bool},n["default"]=(0,b.connect)(l,s)(C),t.exports=n["default"]},{"../../constants":6,"../../state/gallery/actions":11,i18n:"i18n",jQuery:"jQuery",react:"react","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},s=e("react"),u=r(s),c=e("silverstripe-component"),d=r(c),f=function(e){function t(e){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.handleChange=this.handleChange.bind(this)}return a(t,e),o(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"field text"},u["default"].createElement("label",{className:"left",htmlFor:"gallery_"+this.props.name},this.props.label),u["default"].createElement("div",{className:"middleColumn"},u["default"].createElement("input",{id:"gallery_"+this.props.name,className:"text",type:"text",name:this.props.name,onChange:this.handleChange,value:this.props.value})))}},{key:"handleChange",value:function(e){this.props.onChange()}}]),t}(d["default"]);n["default"]=f,f.propTypes={label:u["default"].PropTypes.string.isRequired,name:u["default"].PropTypes.string.isRequired,value:u["default"].PropTypes.string.isRequired,onChange:u["default"].PropTypes.func.isRequired},t.exports=n["default"]},{react:"react","silverstripe-component":"silverstripe-component"}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("i18n"),a=r(i);n["default"]={THUMBNAIL_HEIGHT:150,THUMBNAIL_WIDTH:200,SPACE_KEY_CODE:32,RETURN_KEY_CODE:13,BULK_ACTIONS:[{value:"delete",label:a["default"]._t("AssetGalleryField.BULK_ACTIONS_DELETE"),destructive:!0}],BULK_ACTIONS_PLACEHOLDER:a["default"]._t("AssetGalleryField.BULK_ACTIONS_PLACEHOLDER")},t.exports=n["default"]},{i18n:"i18n"}],7:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{gallery:e.assetAdmin.gallery}}function s(e){return{actions:(0,b.bindActionCreators)(E,e)}}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},d=e("jQuery"),f=(i(d),e("i18n")),p=i(f),h=e("react"),y=i(h),v=e("silverstripe-component"),m=i(v),g=e("react-redux"),b=e("redux"),_=e("../../state/gallery/actions"),E=r(_),F=e("../../components/text-field/index"),O=i(F),k=function(e){function t(e){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.fields=[{label:"Title",name:"title",value:this.props.file.title},{label:"Filename",name:"basename",value:this.props.file.basename}],this.onFieldChange=this.onFieldChange.bind(this),this.onFileSave=this.onFileSave.bind(this),this.onCancel=this.onCancel.bind(this)}return o(t,e),u(t,[{key:"componentDidMount",value:function(){c(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.actions.setEditorFields(this.fields)}},{key:"componentWillUnmount",value:function(){c(Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.props.actions.setEditorFields()}},{key:"onFieldChange",value:function(e){this.props.actions.updateEditorField({name:e.target.name,value:e.target.value})}},{key:"onFileSave",value:function(e){this.props.onFileSave(this.props.file.id,this.props.gallery.editorFields,e)}},{key:"onCancel",value:function(e){this.props.actions.setEditing(!1)}},{key:"render",value:function(){var e=this;return y["default"].createElement("div",{className:"editor"},y["default"].createElement("div",{className:"CompositeField composite cms-file-info nolabel"},y["default"].createElement("div",{className:"CompositeField composite cms-file-info-preview nolabel"},y["default"].createElement("img",{className:"thumbnail-preview",src:this.props.file.url})),y["default"].createElement("div",{className:"CompositeField composite cms-file-info-data nolabel"},y["default"].createElement("div",{className:"CompositeField composite nolabel"},y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.TYPE"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.type)))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.SIZE"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.size))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.URL"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},y["default"].createElement("a",{href:this.props.file.url,target:"_blank"},this.props.file.url)))),y["default"].createElement("div",{className:"field date_disabled readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.CREATED"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.created))),y["default"].createElement("div",{className:"field date_disabled readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.LASTEDIT"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.lastUpdated))),y["default"].createElement("div",{className:"field readonly"},y["default"].createElement("label",{className:"left"},p["default"]._t("AssetGalleryField.DIM"),":"),y["default"].createElement("div",{className:"middleColumn"},y["default"].createElement("span",{className:"readonly"},this.props.file.attributes.dimensions.width," x ",this.props.file.attributes.dimensions.height,"px"))))),this.props.gallery.editorFields.map(function(t,n){return y["default"].createElement(O["default"],{key:n,label:t.label,name:t.name,value:t.value,onChange:e.onFieldChange})}),y["default"].createElement("div",null,y["default"].createElement("button",{type:"submit",className:"ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-check-mark",onClick:this.onFileSave},p["default"]._t("AssetGalleryField.SAVE")),y["default"].createElement("button",{type:"button",className:"ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-cancel-circled",onClick:this.onCancel},p["default"]._t("AssetGalleryField.CANCEL"))))}}]),t}(m["default"]);k.propTypes={file:y["default"].PropTypes.shape({id:y["default"].PropTypes.number,title:y["default"].PropTypes.string,basename:y["default"].PropTypes.string,url:y["default"].PropTypes.string,size:y["default"].PropTypes.string,created:y["default"].PropTypes.string,lastUpdated:y["default"].PropTypes.string,dimensions:y["default"].PropTypes.shape({width:y["default"].PropTypes.number,height:y["default"].PropTypes.number})}),onFileSave:y["default"].PropTypes.func,onCancel:y["default"].PropTypes.func},n["default"]=(0,g.connect)(l,s)(k),t.exports=n["default"]},{"../../components/text-field/index":5,"../../state/gallery/actions":11,i18n:"i18n",jQuery:"jQuery",react:"react","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],8:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return function(n,r){if("asc"===t){if(n[e]<r[e])return-1;if(n[e]>r[e])return 1}else{if(n[e]>r[e])return-1;if(n[e]<r[e])return 1}return 0}}function s(e,t){var n=this,r=l(e,t);return function(){var e=n.props.gallery.files.filter(function(e){return"folder"===e.type}),t=n.props.gallery.files.filter(function(e){return"folder"!==e.type});n.props.actions.addFile(e.sort(r).concat(t.sort(r)))}}function u(e){return{gallery:e.assetAdmin.gallery}}function c(e){return{actions:(0,O.bindActionCreators)(M,e)}}Object.defineProperty(n,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,a);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=a,n=o,r=!0,l=u=void 0}},h=e("jQuery"),y=i(h),v=e("i18n"),m=i(v),g=e("react"),b=i(g),_=e("react-dom"),E=i(_),F=e("react-redux"),O=e("redux"),k=e("react-addons-test-utils"),D=i(k),T=e("../../components/file/index"),C=i(T),L=e("../editor/controller.js"),S=i(L),x=e("../../components/bulk-actions/index"),N=i(x),w=e("silverstripe-component"),P=i(w),j=e("../../constants"),A=i(j),I=e("../../state/gallery/actions"),M=r(I),R=function(e){function t(e){a(this,t),p(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.folders=[e.initial_folder],this.sort="name",this.direction="asc",this.sorters=[{field:"title",direction:"asc",label:m["default"]._t("AssetGalleryField.FILTER_TITLE_ASC"),onSort:s.call(this,"title","asc")},{field:"title",direction:"desc",label:m["default"]._t("AssetGalleryField.FILTER_TITLE_DESC"),onSort:s.call(this,"title","desc")},{field:"created",direction:"desc",label:m["default"]._t("AssetGalleryField.FILTER_DATE_DESC"),onSort:s.call(this,"created","desc")},{field:"created",direction:"asc",label:m["default"]._t("AssetGalleryField.FILTER_DATE_ASC"),onSort:s.call(this,"created","asc")}],this.onFetchData=this.onFetchData.bind(this),this.onSaveData=this.onSaveData.bind(this),this.onDeleteData=this.onDeleteData.bind(this),this.onNavigateData=this.onNavigateData.bind(this),this.onMoreData=this.onMoreData.bind(this),this.onSearchData=this.onSearchData.bind(this),this.onFileSave=this.onFileSave.bind(this),this.onFileNavigate=this.onFileNavigate.bind(this),this.onFileDelete=this.onFileDelete.bind(this),this.onBackClick=this.onBackClick.bind(this),this.onMoreClick=this.onMoreClick.bind(this),this.onNavigate=this.onNavigate.bind(this)}return o(t,e),f(t,[{key:"componentDidMount",value:function(){p(Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.props.initial_folder!==this.props.current_folder?this.onNavigate(this.props.current_folder):this.props.backend.search(),this.props.backend.on("onFetchData",this.onFetchData),this.props.backend.on("onSaveData",this.onSaveData),this.props.backend.on("onDeleteData",this.onDeleteData),this.props.backend.on("onNavigateData",this.onNavigateData),this.props.backend.on("onMoreData",this.onMoreData),this.props.backend.on("onSearchData",this.onSearchData)}},{key:"componentWillUnmount",value:function(){p(Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this),this.props.backend.removeListener("onFetchData",this.onFetchData),this.props.backend.removeListener("onSaveData",this.onSaveData),this.props.backend.removeListener("onDeleteData",this.onDeleteData),this.props.backend.removeListener("onNavigateData",this.onNavigateData),this.props.backend.removeListener("onMoreData",this.onMoreData),this.props.backend.removeListener("onSearchData",this.onSearchData)}},{key:"componentDidUpdate",value:function(){var e=(0,y["default"])(E["default"].findDOMNode(this)).find(".gallery__sort .dropdown");e.chosen({allow_single_deselect:!0,disable_search_threshold:20}),e.change(function(){return D["default"].Simulate.click(e.find(":selected")[0])})}},{key:"getFileById",value:function(e){for(var t=null,n=0;n<this.props.gallery.files.length;n+=1)if(this.props.gallery.files[n].id===e){t=this.props.gallery.files[n];break}return t}},{key:"getNoItemsNotice",value:function(){return this.props.gallery.count<1?b["default"].createElement("p",{className:"gallery__no-item-notice"},m["default"]._t("AssetGalleryField.NOITEMSFOUND")):null}},{key:"getBackButton",value:function(){return this.folders.length>1?b["default"].createElement("button",{className:"gallery__back ss-ui-button ui-button ui-widget ui-state-default ui-corner-all font-icon-level-up no-text",onClick:this.onBackClick,ref:"backButton"}):null}},{key:"getBulkActionsComponent",value:function(){return this.props.gallery.selectedFiles.length>0&&this.props.backend.bulkActions?b["default"].createElement(N["default"],{backend:this.props.backend}):null}},{key:"getMoreButton",value:function(){return this.props.gallery.count>this.props.gallery.files.length?b["default"].createElement("button",{
className:"gallery__load__more",onClick:this.onMoreClick},m["default"]._t("AssetGalleryField.LOADMORE")):null}},{key:"render",value:function(){var e=this;return this.props.gallery.editing!==!1?b["default"].createElement("div",{className:"gallery"},b["default"].createElement(S["default"],{file:this.props.gallery.editing,onFileSave:this.onFileSave,onCancel:this.onCancel})):b["default"].createElement("div",{className:"gallery"},this.getBackButton(),this.getBulkActionsComponent(),b["default"].createElement("div",{className:"gallery__sort fieldholder-small"},b["default"].createElement("select",{className:"dropdown no-change-track no-chzn",tabIndex:"0",style:{width:"160px"}},this.sorters.map(function(e,t){return b["default"].createElement("option",{key:t,onClick:e.onSort},e.label)}))),b["default"].createElement("div",{className:"gallery__items"},this.props.gallery.files.map(function(t,n){return b["default"].createElement(C["default"],d({key:n},t,{spaceKey:A["default"].SPACE_KEY_CODE,returnKey:A["default"].RETURN_KEY_CODE,onFileDelete:e.onFileDelete,onFileNavigate:e.onFileNavigate}))})),this.getNoItemsNotice(),b["default"].createElement("div",{className:"gallery__load"},this.getMoreButton()))}},{key:"onFetchData",value:function(e){this.props.actions.addFile(e.files,e.count)}},{key:"onSaveData",value:function(e,t){this.props.actions.setEditing(!1),this.props.actions.updateFile(e,{title:t.title,basename:t.basename})}},{key:"onDeleteData",value:function(e){var t=this.props.gallery.files.filter(function(t){return e!==t.id});this.props.actions.addFile(t,this.props.gallery.count-1)}},{key:"onNavigateData",value:function(e){this.props.actions.addFile(e.files,e.count)}},{key:"onMoreData",value:function(e){this.props.actions.addFile(this.props.gallery.files.concat(e.files),e.count)}},{key:"onSearchData",value:function(e){this.props.actions.addFile(e.files,e.count)}},{key:"onFileDelete",value:function(e,t){confirm(m["default"]._t("AssetGalleryField.CONFIRMDELETE"))&&(this.props.backend["delete"](e.id),this.emitFileDeletedCmsEvent()),t.stopPropagation()}},{key:"onFileNavigate",value:function(e){this.folders.push(e.filename),this.props.backend.navigate(e.filename),this.props.actions.deselectFiles(),this.emitFolderChangedCmsEvent()}},{key:"emitFolderChangedCmsEvent",value:function(){for(var e={parentId:0,id:0},t=0;t<this.props.gallery.files.length;t+=1)if(this.props.gallery.files[t].filename===this.props.backend.folder){e.parentId=this.props.gallery.files[t].parent.id,e.id=this.props.gallery.files[t].id;break}this._emitCmsEvent("folder-changed.asset-gallery-field",e)}},{key:"emitFileDeletedCmsEvent",value:function(){this._emitCmsEvent("file-deleted.asset-gallery-field")}},{key:"emitEnterFileViewCmsEvent",value:function(e){this._emitCmsEvent("enter-file-view.asset-gallery-field",e.id)}},{key:"emitExitFileViewCmsEvent",value:function(){this._emitCmsEvent("exit-file-view.asset-gallery-field")}},{key:"onNavigate",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];-1===this.folders.indexOf(e)&&this.folders.push(e),this.props.backend.navigate(e),t||this.emitFolderChangedCmsEvent()}},{key:"onMoreClick",value:function(e){e.stopPropagation(),this.props.backend.more(),e.preventDefault()}},{key:"onBackClick",value:function(e){this.folders.length>1&&(this.folders.pop(),this.props.backend.navigate(this.folders[this.folders.length-1])),this.props.actions.deselectFiles(),this.emitFolderChangedCmsEvent(),e.preventDefault()}},{key:"onFileSave",value:function(e,t,n){this.props.backend.save(e,t),n.stopPropagation(),n.preventDefault()}}]),t}(P["default"]);R.propTypes={backend:b["default"].PropTypes.object.isRequired},n["default"]=(0,F.connect)(u,c)(R),t.exports=n["default"]},{"../../components/bulk-actions/index":3,"../../components/file/index":4,"../../constants":6,"../../state/gallery/actions":11,"../editor/controller.js":7,i18n:"i18n",jQuery:"jQuery",react:"react","react-addons-test-utils":"react-addons-test-utils","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","silverstripe-component":"silverstripe-component"}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={ADD_FILE:"ADD_FILE",UPDATE_FILE:"UPDATE_FILE",SELECT_FILES:"SELECT_FILES",DESELECT_FILES:"DESELECT_FILES",SET_EDITING:"SET_EDITING",SET_FOCUS:"SET_FOCUS",SET_EDITOR_FIELDS:"SET_EDITOR_FIELDS",UPDATE_EDITOR_FIELD:"UPDATE_EDITOR_FIELD"};n.GALLERY=r},{}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=f(d["default"],e);return t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var a=e("redux"),o=e("redux-thunk"),l=r(o),s=e("redux-logger"),u=r(s),c=e("./reducer"),d=r(c),f=(0,a.applyMiddleware)(l["default"],(0,u["default"])())(a.createStore);t.exports=n["default"]},{"./reducer":13,redux:"redux","redux-logger":16,"redux-thunk":"redux-thunk"}],11:[function(e,t,n){"use strict";function r(e,t){return function(n,r){return n({type:d.GALLERY.ADD_FILE,payload:{file:e,count:t}})}}function i(e,t){return function(n,r){return n({type:d.GALLERY.UPDATE_FILE,payload:{id:e,updates:t}})}}function a(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,n){return t({type:d.GALLERY.SELECT_FILES,payload:{ids:e}})}}function o(){var e=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return function(t,n){return t({type:d.GALLERY.DESELECT_FILES,payload:{ids:e}})}}function l(e){return function(t,n){return t({type:d.GALLERY.SET_EDITING,payload:{file:e}})}}function s(e){return function(t,n){return t({type:d.GALLERY.SET_FOCUS,payload:{id:e}})}}function u(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return function(t,n){return t({type:d.GALLERY.SET_EDITOR_FIELDS,payload:{editorFields:e}})}}function c(e){return function(t,n){return t({type:d.GALLERY.UPDATE_EDITOR_FIELD,payload:{updates:e}})}}Object.defineProperty(n,"__esModule",{value:!0}),n.addFile=r,n.updateFile=i,n.selectFiles=a,n.deselectFiles=o,n.setEditing=l,n.setFocus=s,n.setEditorFields=u,n.updateEditorField=c;var d=e("../action-types")},{"../action-types":9}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){void 0===e&&(e=c);var n;switch(t.type){case l.GALLERY.ADD_FILE:return(0,o["default"])(Object.assign({},e,{count:"undefined"!==t.payload.count?t.payload.count:e.count,files:e.files.concat(t.payload.file)}));case l.GALLERY.UPDATE_FILE:var r=e.files.map(function(e){return e.id}).indexOf(t.payload.id),i=Object.assign({},e.files[r],t.payload.updates);return(0,o["default"])(Object.assign({},e,{files:e.files.map(function(e){return e.id===i.id?i:e})}));case l.GALLERY.SELECT_FILES:return n=null===t.payload.ids?(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.concat(e.files.map(function(e){return e.id}).filter(function(t){return-1===e.selectedFiles.indexOf(t)}))})):"number"==typeof t.payload.ids?-1===e.selectedFiles.indexOf(t.payload.ids)?(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.concat(t.payload.ids)})):e:(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.concat(t.payload.ids.filter(function(t){return-1===e.selectedFiles.indexOf(t)}))}));case l.GALLERY.DESELECT_FILES:if(null===t.payload.ids)n=(0,o["default"])(Object.assign({},e,{selectedFiles:[]}));else if("number"==typeof t.payload.ids){var a=e.selectedFiles.indexOf(t.payload.ids);n=(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.slice(0,a).concat(e.selectedFiles.slice(a+1))}))}else n=(0,o["default"])(Object.assign({},e,{selectedFiles:e.selectedFiles.filter(function(e){return-1===t.payload.ids.indexOf(e)})}));return n;case l.GALLERY.SET_EDITING:return(0,o["default"])(Object.assign({},e,{editing:t.payload.file}));case l.GALLERY.SET_FOCUS:return(0,o["default"])(Object.assign({},e,{focus:t.payload.id}));case l.GALLERY.SET_EDITOR_FIELDS:return(0,o["default"])(Object.assign({},e,{editorFields:t.payload.editorFields}));case l.GALLERY.UPDATE_EDITOR_FIELD:var s=e.editorFields.map(function(e){return e.name}).indexOf(t.payload.updates.name),u=Object.assign({},e.editorFields[s],t.payload.updates);return(0,o["default"])(Object.assign({},e,{editorFields:e.editorFields.map(function(e){return e.name===u.name?u:e})}));default:return e}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var a=e("deep-freeze"),o=r(a),l=e("../action-types"),s=e("../../constants.js"),u=r(s),c={count:0,editing:!1,files:[],selectedFiles:[],editing:!1,focus:!1,bulkActions:{placeholder:u["default"].BULK_ACTIONS_PLACEHOLDER,options:u["default"].BULK_ACTIONS},editorFields:[]};t.exports=n["default"]},{"../../constants.js":6,"../action-types":9,"deep-freeze":15}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("redux"),a=e("./gallery/reducer.js"),o=r(a),l=(0,i.combineReducers)({assetAdmin:(0,i.combineReducers)({gallery:o["default"]})});n["default"]=l,t.exports=n["default"]},{"./gallery/reducer.js":12,redux:"redux"}],14:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function a(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!a(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,a,s,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],l(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),s=1;r>s;s++)a[s-1]=arguments[s];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),s=1;r>s;s++)a[s-1]=arguments[s];for(u=n.slice(),r=u.length,s=0;r>s;s++)u[s].apply(this,a)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=l(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,a,l;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(l=a;l-- >0;)if(n[l]===t||n[l].listener&&n[l].listener===t){r=l;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],15:[function(e,t,n){t.exports=function r(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){!e.hasOwnProperty(t)||null===e[t]||"object"!=typeof e[t]&&"function"!=typeof e[t]||Object.isFrozen(e[t])||r(e[t])}),e}},{}],16:[function(e,t,n){"use strict";function r(){function e(){D.forEach(function(e,t){var n=e.started,i=e.startedTime,l=e.action,s=e.prevState,u=e.error,d=e.took,f=e.nextState,h=D[t+1];h&&(f=h.prevState,d=h.started-n);var v=_(l),m="function"==typeof c?c(function(){return f},l):c,g=o(i),b=k.title?"color: "+k.title(v)+";":null,E="action "+(y?g:"")+" "+v.type+" "+(p?"(in "+d.toFixed(2)+" ms)":"");try{m?k.title?a.groupCollapsed("%c "+E,b):a.groupCollapsed(E):k.title?a.group("%c "+E,b):a.group(E)}catch(F){a.log(E)}k.prevState?a[r]("%c prev state","color: "+k.prevState(s)+"; font-weight: bold",s):a[r]("prev state",s),k.action?a[r]("%c action","color: "+k.action(v)+"; font-weight: bold",v):a[r]("action",v),u&&(k.error?a[r]("%c error","color: "+k.error(u,s)+"; font-weight: bold",u):a[r]("error",u)),k.nextState?a[r]("%c next state","color: "+k.nextState(f)+"; font-weight: bold",f):a[r]("next state",f);try{a.groupEnd()}catch(F){a.log("—— log end ——")}}),D.length=0}var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.level,r=void 0===n?"log":n,i=t.logger,a=void 0===i?console:i,s=t.logErrors,u=void 0===s?!0:s,c=t.collapsed,d=t.predicate,f=t.duration,p=void 0===f?!1:f,h=t.timestamp,y=void 0===h?!0:h,v=t.transformer,m=t.stateTransformer,g=void 0===m?function(e){return e}:m,b=t.actionTransformer,_=void 0===b?function(e){return e}:b,E=t.errorTransformer,F=void 0===E?function(e){return e}:E,O=t.colors,k=void 0===O?{title:function(){return"#000000"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}}:O;if("undefined"==typeof a)return function(){return function(e){return function(t){return e(t)}}};v&&console.error("Option 'transformer' is deprecated, use stateTransformer instead");var D=[];return function(t){var n=t.getState;return function(t){return function(r){if("function"==typeof d&&!d(n,r))return t(r);var i={};D.push(i),i.started=l.now(),i.startedTime=new Date,i.prevState=g(n()),i.action=r;var a=void 0;if(u)try{a=t(r)}catch(o){i.error=F(o)}else a=t(r);if(i.took=l.now()-i.started,i.nextState=g(n()),e(),i.error)throw i.error;return a}}}}var i=function(e,t){return new Array(t+1).join(e)},a=function(e,t){return i("0",t-e.toString().length)+e},o=function(e){return"@ "+a(e.getHours(),2)+":"+a(e.getMinutes(),2)+":"+a(e.getSeconds(),2)+"."+a(e.getMilliseconds(),3)},l="undefined"!=typeof performance&&"function"==typeof performance.now?performance:Date;t.exports=r},{}]},{},[2]);